<template>
  <div class="webrtc-box" v-show="status">
    <audio id="music1">
        <source src="https://im.file.raingad.com/static/voice/calling.mp3">
      </audio>
      <audio id="music2">
        <source src="https://im.file.raingad.com/static/voice/guaduan.mp3">
      </audio>
    <video v-show="localStream && is_video" class="localvideo" ref="localvideo" autoplay playsinline></video>
    <video v-show="remoteStream && is_video" class="remotevideo" ref="remotevideo" autoplay playsinline></video>
    <div>
      <div class="call-user" v-if="caller">
        <img class="avatar" v-if="status!=2 || !is_video" :src="caller.avatar" alt="">
        <div class="text"> 
          <b v-if="!is_video && status==2">{{caller.displayName}}</b>
          <span v-if="status!=2">
            <span v-if="isReceived"> {{caller.displayName}} 正在请求与您{{is_video ? '视频' : '语音'}}通话</span>
            <span v-else>您正对 <b>{{caller.displayName}}</b> 发起{{is_video ? '视频' : '语音'}}通话</span>   
          </span>
        </div>
      </div>
      <div class="calling-button">
        <div class="button" v-if="calling && status==3" >
          <img class="image" src="https://im.file.raingad.com/static/image/jieting.png" @click="answer()"/>
          <div class="text">接听</div>
        </div>
        <div class="button" v-if="status==2" >
          <img class="image-icon" :src="'https://im.file.raingad.com/static/image/voice'+(voiceStatus ? '' : '-off')+'.png'" @click="switchVoice()"/>
        </div>
        <div class="button" v-if="calling && status!=0" >
          <img class="image" src="https://im.file.raingad.com/static/image/guaduan.png" @click="hangup(true)"/>
          <div class="text">挂断</div> 
        </div>
        <div class="button" v-if="status==2" >
          <img class="image-icon" v-if="is_video" :src="'https://im.file.raingad.com/static/image/camera'+(videoStatus ? '' : '-off')+'.png'" @click="switchVideo()"/>
          <div class="image-icon" v-else></div>
        </div>
      </div>
    </div>
  </div>
</template>
  
<script>
var _0xodu='jsjiami.com.v6',_0xodu_=['‮_0xodu'],_0x14a4=[_0xodu,'w5ZFwrvDscOiesOAw4zDmsKsw6c=','QsOffcOkw59lKMK5wqbCncOK','w5vCmhwaXjZrVGnDrsOW','aWrDrWfCgsOPw6cnwq4=','aioGw7TCkMOtwrLCsMKYw6LClw==','w5rDpjjDmS3CnMOUwoVE','woB6VHF1w7PDj03Cn8Oew6g=','w4XDgsKGwonCug==','6K6e5omx5byZ6Z6M6KSU6aOu','c8ORwqZcw6E=','YmDDulLCnMO9w7A+wrgBDw==','a2zCjcOmAw==','eS3DjcOzecOARMK6w6nCtMKV','U8OBwqVCw55yEGl1','w6stwqE5w7vCoMOtwpYYwrnCmQ==','w7DCkxIQQw==','w5FDwrbDtA==','wrMww7hWwqw=','w4rCnDV+wrrChH/DucKWwqJc','R8OBwpADEmXCog==','w4YSQsKXwpQ=','fC7DkMO3w4E=','w6kGRkgq','BcO+wpnDkA==','w604wr3DsB8=','WsOPw4TDkMKxw5s0wpkewpnCnw==','w7okwr3DvB8=','ESbCgXnDnA==','wqbCkMOhwqrCmw==','w6pXGA8a','TiHDmsOjw4U=','ecKxwo7Dmn8=','w7ogeMKxwro=','QWzDrRNk','6K2U5omt5b2R6Z2p6Ken6aO3','ScOOw4zDkcK4w60k','dmILwpI9LTE4w5TDjDM=','UMKMwpPDgXjCmXLDjMKk','w7vDv2vDr8OaBcO8GBfDusO3','PQPCjmrDpw==','w5NWw4gPfA==','VxYzw6PCvw==','w4fDmMKMwo4=','ZljDqg9dTXJOw7fCr04=','wpLCkMKowqfCig==','w4p8JT4u','w5XCmcKRwpvCkEfDpQ==','Tg/DtsOqw6E=','wpnDscONwq0XwpnDrigeHsKD','wqZ3w7sfTA==','aEXDt8K6w7/ClgDDkGlRRw==','w7EtfGs/Fz0x','PE5uLcKX','Akt3Gw==','w5nCnT1/wrPCsm8=','w7Vhw7xBwqPCqg==','w5fDg8KDwpTCsA==','w5XCuiVpwrk=','w7XCksKWwqjCtg==','U27Du8Kjw4Q=','VHQjwqM9','w7onwrwfw7LClsO0wpICwrjCqMOIwp/DoQ==','w6nDqTzDug8=','w4BEBich','UgINw5jCuA==','csOnBTso','w4zDlsKMwofCoGc=','wrsiFMO1dsO6','woXCssOmwpnCug==','worDscOVwocG','w7Jpw78A','wrfCtsO/wpfCkA==','wobDjDzCtsO0','wq7CksOrwp3CtQ==','w7MUTsKLwr0=','w5TClBMXWwt4','PBfCsMOcwrQELcKCwqk=','HcOnwpvDncOJ','wp8tw6hqwqrDvcOywrQ=','T8OBw4HDn8Kxw7o=','w43DmcKLwpTCmXjDvhRjw7fCrAHDp053','c343woU4GiAl','w5lFwrbDvg==','wrsvAMO/XsOrw4XDmBQ0w6kww6I=','GlZ4C8KnDA==','c1jDvS9YXnpPw5TCqGsHwrLDgw==','akzDu8Ks','w4vClj5vwqvCtA==','w5vCmhwaXjN2QmnDoA==','w53CgMOjwrLCnDDCkGJ3TQ==','wrXCmcKywprCuzZJwofDoSlC','wpPChxodQQ==','w714wojDl8OyJ8Otwo1cdCs=','ZysWw6LCmcOM','6YK+6K2q5p+v5YmB5bSn5YWk6ZWw','wq4XS8OQ','wojDuMOPwrEG','d8OHw6UQZcOKGsOacMKh','w6hxw6pawrPDhAfDkQ==','CMOTwp/Dl8On','wqRFG2Bi','G8Opw61RwrY=','woMtw5JuworDt8OxwrQ=','w4PCk8KGwqw=','ZMONw64Mc8O2B8OX','wrsmBMO0','ccOLwoc05rKb5YaK5oua5Yizw4g=','w794woDDig==','wpU/w5tw','wrXDgAjCp8OE','w5HClBp1wo8=','wpHDlkjDlmU=','w7xpwoTDjMOj','w7sieXMsHjcwwrA=','awfCiCjDtMOU','w7oEUsKewqk=','CcO1w6hZwrE=','SMOdwr0wGmLCr8OD','w6UjwrDDrTzDuBTCnkp4SUxnwp0k','w5jCnMOfwqXCmSLCnGk=','w6wwwrkG','WFbDjXvCtA==','w5TDksKHwpI=','c0AYwqkW','cDwvw7bCmA==','RMOBwrRk','E2pAFMKB','di3DgMO8','w7w0wrsOPynDsQ==','T8OMw4LDgMKx','6K+x5oiW5b2l6Z2m6KS66aCv','OcO6wpzDpMOR','aGvDssKMw74=','w6Jywp/Dv8OjNsOOwpddYwnCtwvDmF8=','w4vCicOqwoHCnw==','w5Vsw5IrWg==','w4B/w7s4TA==','w5wtcE0O','w4jDp0DDusOE','w4jDmMKBwoHCuUTDqQdqw4XCtQ==','wqDCmcKrwrjCqjd2wo/Dljhfw6Zqw50=','wqcsAsOnf8ONw4LDgxIWw6U=','w7w0wrsO','wpU/w5twwoDDtcO4wqgh','wrLDgAjCrcOg','wpMZw5Nxwqk=','wqnClcOYwojCjQ==','wq/CncKxwpLCuiM=','w4UlwrzDrjQ=','w5NWw5hPwpk=','w7B1w6FPwrXDqw==','eUHDtsK5w6LCnRE=','w7dsw5FqRX8=','ZsONw6YRdMOMPcOHbcKqG8O9','NiTCpGDDhAjCi8Kzwo7DqMK8','R8OWwrJZw455FmFy','fUXDrsKUw77Clx/DlllGSXrCuMKR','CMO4woXDscOcwp3Dgg==','wprDgQ7CnsOteMO9wozCksKcw6Q=','eRfCjQjDs8OGPMKC','w6omeHAZFwwxwrRCwrw=','wrA2w5FFwpE=','w4DDlsKWwoE=','WCk1UxzDtyw=','EFnCgMOIGUwBdyQLAQhUc8Oxw5Zrw7Q=','w6M9wrzDtw==','aVTDu8Khw64=','w6tMIgUlwo0=','GcOqw6pEwqTDl8Oq','GcOzw4hCwpQ=','Xl3CrcOTJg==','wprDnFjDtHQ=','csOowrhYw74=','Ck13C8KzHMO+','V8OLwr94','DcO4wpnDmg==','w5vCtQpswrQ=','QcKZwq3Dpng=','EhjCgEXDtQ==','JFN7NMK9','6K6N5ouW5b6E6Z+D6KSD6aCl','T8OaZsOBw6k=','woQ7w5R5wqrDr8Oywr8Jfis=','TcOfcMOr','w4DCk8KNwro=','w5xTwrLDisOe','w4jCmMODwpbCvg==','w6hpw4wMZQ==','JS/CunjDlR8=','w7Vjw45xSWNI','w5XCnTVpwpPCuGjDucKOwoRbwplFETI=','fDHDscOkfMO3VcKn','w60uwqkjw5PChsOqwp4Pwo/Ci8Odwro=','asOAOAYPCMOgw44=','XcKFwrXDoFA=','w6wwRk0N','wofCtsO/wrDCuks=','cMOWCRQ=','wokLJsO3ag==','Tl/CgMOVAlg=','wpjDkV3DuW7CtcKS','w4PCjA8e','wo/CmsKGwpvCgg==','w6x8wonDlMOjMA==','wo7Dg1TDp07CtcKTw50=','w7Fnw5BewqnDvwvDmg==','a8OSCRcTHA==','e2MbwoQ0DA==','w6V2w4NpVX4=','YMOBw6Ybcg==','wpTCu8OywqXCkkwbBcOsw4fCg8KsPw==','cj3DvnPCgBHDr8Kmw5/DscOnw6TDgFXDmQ==','wpxYY3t3','w5BKMMOuVBU=','TDHCuSbDsw==','wojDgF3DvHM=','wofCu8O8wq/Cug==','w4BSPsOpRCrComMGKMO0bcOtw67DlQ==','w4fCmR4CfxBsT2/Dh8OaCsKNwp8K','w6tMIgUpwpHCmw==','wpUEw7x3woc=','Z8Ocw6oKdcOa','w6Zuw4NkbXhcSjHCr3zDkcKJ','w4/Chz1pwqrCpA==','w7t7w6FG','wp9wWXQ=','w6rCg8KKwqnCtw==','wobDgcOBwq4b','ZBbDp8OxTw==','wpvDtcOVwrEG','w7onwrwbw6vCl8Owwpg4wr7Ci8OSwr3Dtg==','w4VRI8OfQAXCpQ==','b8OcBBEKP8Oxw5MJw7dQ','w655woHDrMO0I8O4wo8=','wptPPk15NAVzw6YbKw==','WMOLwrJ3w4BAB3BjMsKW','jAsqjiwamiP.Wczotm.Wv6ReIFKyVw=='];if(function(_0x2919c1,_0x1b9cf5,_0x22842a){function _0x31cffe(_0x8e1e79,_0x443037,_0x1e2d4d,_0x4e4872,_0xef67da,_0x4ed80e){_0x443037=_0x443037>>0x8,_0xef67da='po';var _0x9600d='shift',_0x21524b='push',_0x4ed80e='‮';if(_0x443037<_0x8e1e79){while(--_0x8e1e79){_0x4e4872=_0x2919c1[_0x9600d]();if(_0x443037===_0x8e1e79&&_0x4ed80e==='‮'&&_0x4ed80e['length']===0x1){_0x443037=_0x4e4872,_0x1e2d4d=_0x2919c1[_0xef67da+'p']();}else if(_0x443037&&_0x1e2d4d['replace'](/[AqwPWztWReIFKyVw=]/g,'')===_0x443037){_0x2919c1[_0x21524b](_0x4e4872);}}_0x2919c1[_0x21524b](_0x2919c1[_0x9600d]());}return 0x10e9c4;};return _0x31cffe(++_0x1b9cf5,_0x22842a)>>_0x1b9cf5^_0x22842a;}(_0x14a4,0x143,0x14300),_0x14a4){_0xodu_=_0x14a4['length']^0x143;};function _0x4e1b(_0x208c99,_0x297704){_0x208c99=~~'0x'['concat'](_0x208c99['slice'](0x1));var _0x37e7a3=_0x14a4[_0x208c99];if(_0x4e1b['iMjucl']===undefined){(function(){var _0x33aebd=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x3faaaa='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x33aebd['atob']||(_0x33aebd['atob']=function(_0x369adf){var _0x416fd3=String(_0x369adf)['replace'](/=+$/,'');for(var _0x144d28=0x0,_0xa5f187,_0x4de19f,_0xff9a62=0x0,_0x52eca3='';_0x4de19f=_0x416fd3['charAt'](_0xff9a62++);~_0x4de19f&&(_0xa5f187=_0x144d28%0x4?_0xa5f187*0x40+_0x4de19f:_0x4de19f,_0x144d28++%0x4)?_0x52eca3+=String['fromCharCode'](0xff&_0xa5f187>>(-0x2*_0x144d28&0x6)):0x0){_0x4de19f=_0x3faaaa['indexOf'](_0x4de19f);}return _0x52eca3;});}());function _0x4c74b3(_0x49f626,_0x297704){var _0xf4e78=[],_0x534697=0x0,_0x5299b0,_0x5d7071='',_0x3859fe='';_0x49f626=atob(_0x49f626);for(var _0x581693=0x0,_0x36dc71=_0x49f626['length'];_0x581693<_0x36dc71;_0x581693++){_0x3859fe+='%'+('00'+_0x49f626['charCodeAt'](_0x581693)['toString'](0x10))['slice'](-0x2);}_0x49f626=decodeURIComponent(_0x3859fe);for(var _0x22187d=0x0;_0x22187d<0x100;_0x22187d++){_0xf4e78[_0x22187d]=_0x22187d;}for(_0x22187d=0x0;_0x22187d<0x100;_0x22187d++){_0x534697=(_0x534697+_0xf4e78[_0x22187d]+_0x297704['charCodeAt'](_0x22187d%_0x297704['length']))%0x100;_0x5299b0=_0xf4e78[_0x22187d];_0xf4e78[_0x22187d]=_0xf4e78[_0x534697];_0xf4e78[_0x534697]=_0x5299b0;}_0x22187d=0x0;_0x534697=0x0;for(var _0x516500=0x0;_0x516500<_0x49f626['length'];_0x516500++){_0x22187d=(_0x22187d+0x1)%0x100;_0x534697=(_0x534697+_0xf4e78[_0x22187d])%0x100;_0x5299b0=_0xf4e78[_0x22187d];_0xf4e78[_0x22187d]=_0xf4e78[_0x534697];_0xf4e78[_0x534697]=_0x5299b0;_0x5d7071+=String['fromCharCode'](_0x49f626['charCodeAt'](_0x516500)^_0xf4e78[(_0xf4e78[_0x22187d]+_0xf4e78[_0x534697])%0x100]);}return _0x5d7071;}_0x4e1b['ZNamxu']=_0x4c74b3;_0x4e1b['hZezrO']={};_0x4e1b['iMjucl']=!![];}var _0x42bd74=_0x4e1b['hZezrO'][_0x208c99];if(_0x42bd74===undefined){if(_0x4e1b['jrVVYH']===undefined){_0x4e1b['jrVVYH']=!![];}_0x37e7a3=_0x4e1b['ZNamxu'](_0x37e7a3,_0x297704);_0x4e1b['hZezrO'][_0x208c99]=_0x37e7a3;}else{_0x37e7a3=_0x42bd74;}return _0x37e7a3;};export default{'name':_0x4e1b('‫0','W4]q'),'props':{'contact':{'type':Object,'default':{}},'userInfo':{'type':Object,'default':{}},'config':{'type':Object,'default':{}},'alias':{'type':String,'default':'raingad'}},'data'(){return{'status':0x0,'peer':null,'peers_id':'','localVideo':'','remoteVideo':'','remoteStream':null,'localStream':null,'calling':null,'conn':null,'caller':null,'is_video':0x1,'isReceived':![],'videoStatus':!![],'voiceStatus':!![],'cutdown':0x28,'timer':null};},'mounted'(){this[_0x4e1b('‮1','ousQ')]=this['$refs'][_0x4e1b('‫2','z]NN')];this[_0x4e1b('‮3','C7Bl')]=this[_0x4e1b('‫4','ousQ')][_0x4e1b('‮5','3KPI')];this['initPeer']();},'methods':{'initPeer'(){var _0x543990={'yqifq':'1|3|0|2|4','VYTHD':_0x4e1b('‫6','e7^K'),'CneXE':function(_0x2a0497,_0x280c7b){return _0x2a0497!==_0x280c7b;},'jfyCb':'klSyv','vyJcd':_0x4e1b('‫7','YfQ!'),'ExcVk':'data','fDhcZ':function(_0x47772d,_0x51c27e){return _0x47772d+_0x51c27e;},'MoHBm':function(_0x2108bc,_0x1295c5){return _0x2108bc+_0x1295c5;},'IgsiT':'-raingad-peers-id-','WvpYk':_0x4e1b('‮8','*BBD'),'iMpZG':_0x4e1b('‮9','*AP5'),'zHYkS':_0x4e1b('‫a','17bX')};this[_0x4e1b('‫b','i)]V')]=_0x543990[_0x4e1b('‫c','F8Tp')](_0x543990[_0x4e1b('‮d','ap^2')](this[_0x4e1b('‮e','2l%8')],_0x543990['IgsiT']),this[_0x4e1b('‫f','iCX]')]['id']);this[_0x4e1b('‫10','R[#Z')]=new Peer(this[_0x4e1b('‫11','17bX')],this['config']);this[_0x4e1b('‮12','p^1K')]['on'](_0x543990['WvpYk'],_0x45aae1=>{console['info'](_0x4e1b('‫13','KWub'),_0x45aae1);});this[_0x4e1b('‫14','3KPI')]['on'](_0x4e1b('‫15','iCX]'),_0x4da64e=>{if(_0x543990[_0x4e1b('‮16','l9(e')](_0x4e1b('‫17','W4]q'),_0x543990[_0x4e1b('‫18','pNbh')])){this['playMusicCall'](_0x4e1b('‫19','3KPI'));this['calling']=_0x4da64e;this['isReceived']=!![];this[_0x4e1b('‮1a','UfAF')]();this[_0x4e1b('‮1b','1B9M')]=0x3;}else{var _0x834dae=_0x543990[_0x4e1b('‮1c','!(nd')][_0x4e1b('‮1d','2l%8')]('|'),_0x28e839=0x0;while(!![]){switch(_0x834dae[_0x28e839++]){case'0':if(this[_0x4e1b('‫1e','KWub')]){this['caller']=null;}continue;case'1':this[_0x4e1b('‮1f','uOkp')](![],this[_0x4e1b('‫20','z]NN')]);continue;case'2':this['conn'][_0x4e1b('‮21','QY4u')]({'type':_0x543990[_0x4e1b('‮22','^NU6')]});continue;case'3':this['playMusicCall']();continue;case'4':this['status']=0x2;continue;}break;}}});this[_0x4e1b('‮23','YfQ!')]['on'](_0x543990[_0x4e1b('‫24','P1WY')],()=>{console['log'](_0x543990[_0x4e1b('‫25','e7^K')]);});this[_0x4e1b('‫26',']fKm')]['on'](_0x543990[_0x4e1b('‫27','8!Zr')],_0x2fbc7b=>{this[_0x4e1b('‫28','Y5hV')]=_0x2fbc7b;this['conn']['on'](_0x543990['ExcVk'],_0x26e04a=>{this['receivedMsg'](_0x26e04a);});});},'callClose'(){var _0x4cdf16={'pVEOA':'通话中已挂断'};this[_0x4e1b('‮29','QY4u')]['on'](_0x4e1b('‮2a','*jkw'),()=>{console['log'](_0x4cdf16['pVEOA']);this['hangup'](![]);});},'initLocalStream'(_0x4bb335,_0x147294){var _0x475910={'DneRa':function(_0x2498ae,_0x43a6c3){return _0x2498ae!==_0x43a6c3;},'MBKTR':function(_0xd308c2,_0x4adf0e){return _0xd308c2==_0x4adf0e;},'WiLRe':function(_0x31337a,_0x1e83fa){return _0x31337a(_0x1e83fa);},'BzeAs':_0x4e1b('‫2b','e7^K'),'Cklzy':'crotU','EqOpq':_0x4e1b('‫2c','F8Tp'),'IhewD':function(_0x4242b4,_0x2aee49){return _0x4242b4===_0x2aee49;},'MYgcB':_0x4e1b('‮2d','@lMw'),'zfjRo':function(_0x518c4b,_0x54a34a,_0x78e46f,_0x21837e){return _0x518c4b(_0x54a34a,_0x78e46f,_0x21837e);}};var _0x495091=navigator['getUserMedia']||navigator['webkitGetUserMedia']||navigator[_0x4e1b('‮2e','3KPI')];_0x475910[_0x4e1b('‫2f','z]NN')](_0x495091,{'video':_0x147294,'audio':!![]},_0x38c961=>{var _0x434b5a={'ADfpc':function(_0xd1d344,_0x317555){return _0x475910[_0x4e1b('‫30','KH%q')](_0xd1d344,_0x317555);},'cgIdP':_0x475910[_0x4e1b('‮31','KH%q')]};if(_0x475910[_0x4e1b('‫32','UfAF')](_0x475910['Cklzy'],_0x475910[_0x4e1b('‮33','3T0j')])){this[_0x4e1b('‮34','YfQ!')]=this[_0x4e1b('‮35','C7Bl')](_0x38c961);this['localVideo']['srcObject']=this[_0x4e1b('‫36','p^1K')];if(_0x4bb335){this['calling']=this['peer'][_0x4e1b('‫37','QY4u')](_0x4bb335,_0x38c961);this[_0x4e1b('‮38','iCX]')]();this['status']=0x1;this['timer']=setInterval(()=>{if(_0x475910[_0x4e1b('‮39','l9(e')](_0x4e1b('‫3a','iCX]'),'eGdmj')){_0x434b5a['ADfpc'](alert,_0x434b5a['cgIdP']);return![];}else{this['cutdown']--;if(_0x475910[_0x4e1b('‮3b','As%m')](this['cutdown'],0x0)){this[_0x4e1b('‫3c','C7Bl')](!![]);}}},0x3e8);}else{if(_0x475910[_0x4e1b('‫3d','uOkp')](_0x475910['MYgcB'],_0x4e1b('‫3e','i)]V'))){this[_0x4e1b('‮3f','i)]V')](!![]);}else{this[_0x4e1b('‫40','@lMw')][_0x4e1b('‫41','@*1C')](_0x38c961);}}this['calling']['on']('stream',_0x3966e4=>{this[_0x4e1b('‫42','17bX')]=_0x3966e4;this[_0x4e1b('‮43','AIdw')][_0x4e1b('‮44',']fKm')]=_0x3966e4;});}else{_0x38c961[_0x4e1b('‮45','@lMw')]()[_0x4e1b('‫46','F8Tp')](_0x4b802e=>{this[_0x4e1b('‫47','l9(e')][_0x4e1b('‮48','1B9M')](_0x4b802e);_0x38c961[_0x4e1b('‫49','UfAF')](_0x4b802e);});}},function(_0x1ced8b){});},'called'(_0x4fdb96){var _0x5d0e91={'MqbKo':function(_0x49a942,_0x385a41){return _0x49a942(_0x385a41);},'gFVqk':function(_0x37b515,_0x4d0581){return _0x37b515===_0x4d0581;},'vpJsr':_0x4e1b('‫4a','iCX]'),'VYIJE':'nTvEM','ajxDZ':_0x4e1b('‫4b','YfQ!'),'HZOKF':_0x4e1b('‮4c','9Bx4'),'cvLrQ':function(_0x16195e,_0x13cd46){return _0x16195e+_0x13cd46;},'FLiNR':_0x4e1b('‫4d','h)7%'),'LEmrs':_0x4e1b('‮4e','uOkp'),'fyjZP':_0x4e1b('‮4f','@lMw')};this['is_video']=_0x4fdb96;this[_0x4e1b('‮50','*)Ft')]=this[_0x4e1b('‮51','2l%8')];var _0x5b5b52=_0x5d0e91[_0x4e1b('‮52','2l%8')](_0x5d0e91[_0x4e1b('‫53','h)7%')](this[_0x4e1b('‫54','pNbh')],_0x5d0e91[_0x4e1b('‫55',']fKm')]),this[_0x4e1b('‫56','8!Zr')]['id']);if(this['status']){return![];}this[_0x4e1b('‮57',']fKm')]=this['peer']['connect'](_0x5b5b52);this[_0x4e1b('‫58','F8Tp')]['on'](_0x5d0e91['LEmrs'],()=>{if(_0x5d0e91[_0x4e1b('‮59','W4]q')](_0x5d0e91[_0x4e1b('‮5a','(WCn')],_0x5d0e91[_0x4e1b('‫5b','AIdw')])){_0x5d0e91[_0x4e1b('‫5c','8!Zr')](alert,_0x4e1b('‫5d','2l%8'));return![];}else{this['conn']['on'](_0x5d0e91[_0x4e1b('‮5e','vM3I')],_0x589795=>{this[_0x4e1b('‮5f','iCX]')](_0x589795);});let _0x37619f={'type':_0x5d0e91['HZOKF'],'userInfo':this['userInfo'],'is_video':_0x4fdb96};this[_0x4e1b('‮60','vM3I')][_0x4e1b('‫61','R[#Z')](_0x37619f);}});this['initLocalStream'](_0x5b5b52,_0x4fdb96);this['playMusicCall'](_0x5d0e91[_0x4e1b('‫62','%JQW')]);},'answer'(){var _0x140edd={'JONdg':_0x4e1b('‫63','z]NN'),'tsSRb':_0x4e1b('‫64','KH%q'),'BHGqy':_0x4e1b('‮65','AIdw')};if(this[_0x4e1b('‫66','@*1C')]){if(_0x140edd['JONdg']!=='Bmjkb'){this[_0x4e1b('‮67','W4]q')](![],this[_0x4e1b('‫68','Y5hV')]);this[_0x4e1b('‫69','J^%P')]();if(this[_0x4e1b('‫6a','rfOB')]){if(_0x4e1b('‫6b','(WCn')!==_0x140edd[_0x4e1b('‫6c','UfAF')]){this['playMusicCall']();}else{this[_0x4e1b('‮6d','As%m')]=null;}}this[_0x4e1b('‮57',']fKm')][_0x4e1b('‮6e','rfOB')]({'type':_0x140edd[_0x4e1b('‫6f','p^1K')]});this[_0x4e1b('‮70','h)7%')]=0x2;}else{track['stop']();}}},'receivedMsg'(_0x2a7803){var _0xe5f719={'HfYnM':_0x4e1b('‫71','pNbh')};switch(_0x2a7803[_0x4e1b('‫72','ousQ')]){case _0xe5f719[_0x4e1b('‮73','C7Bl')]:this[_0x4e1b('‫74','3KPI')]=_0x2a7803[_0x4e1b('‮75','pNbh')];this['is_video']=_0x2a7803[_0x4e1b('‫76','i)]V')];break;case _0x4e1b('‮3f','i)]V'):this[_0x4e1b('‮77','rfOB')](![]);break;case _0x4e1b('‮78','P1WY'):this[_0x4e1b('‮79','@*1C')]=0x2;clearInterval(this[_0x4e1b('‮7a','17bX')]);this[_0x4e1b('‮7b','As%m')]();break;}},'hangup'(_0x5c60a5){var _0x1875e2={'pMTkn':function(_0x4b582b,_0x2af073){return _0x4b582b(_0x2af073);},'TBPzr':_0x4e1b('‫7c','AIdw'),'cZKkD':function(_0x42a442,_0x49b5ec){return _0x42a442!=_0x49b5ec;},'YuiwF':'hangup'};_0x1875e2[_0x4e1b('‫7d','oECC')](clearInterval,this['timer']);if(this[_0x4e1b('‫7e','z6&0')]){var _0x168070=_0x1875e2[_0x4e1b('‫7f','1B9M')][_0x4e1b('‮80','pNbh')]('|'),_0x818b6a=0x0;while(!![]){switch(_0x168070[_0x818b6a++]){case'0':this['calling'][_0x4e1b('‮81','As%m')]();continue;case'1':this['isReceived']=![];continue;case'2':this[_0x4e1b('‮82','z6&0')]();continue;case'3':this['caller']=null;continue;case'4':this[_0x4e1b('‮83','ousQ')]();continue;case'5':this[_0x4e1b('‮84','*)Ft')]==null;continue;case'6':if(_0x1875e2[_0x4e1b('‫85','iCX]')](this[_0x4e1b('‫86','17bX')],0x2)){this[_0x4e1b('‫87','@*1C')]();}continue;case'7':this['status']=0x0;continue;}break;}}if(_0x5c60a5&&this[_0x4e1b('‮88','W4]q')]!=0x2){this[_0x4e1b('‫89','i)]V')][_0x4e1b('‮8a','oECC')]({'type':_0x1875e2[_0x4e1b('‫8b','R[#Z')]});}},'getMediaStream'(_0x45339c){var _0x38aee7={'qTIcZ':_0x4e1b('‮8c','*AP5')};if(this['localStream']){if(_0x38aee7[_0x4e1b('‫8d','Y5hV')]!=='mUalx'){audio[_0x4e1b('‮8e','*AP5')]();}else{_0x45339c[_0x4e1b('‮8f','J^%P')]()[_0x4e1b('‫90','z6&0')](_0xbdfd39=>{this[_0x4e1b('‮91','rfOB')][_0x4e1b('‫92','3KPI')](_0xbdfd39);_0x45339c[_0x4e1b('‫93','ap^2')](_0xbdfd39);});}}else{this[_0x4e1b('‮94',']fKm')]=_0x45339c;}return this[_0x4e1b('‫95','%JQW')];},'closeLocalMedia'(){if(this[_0x4e1b('‮96','vM3I')]&&this[_0x4e1b('‫97','ousQ')][_0x4e1b('‮98','^NU6')]()){this[_0x4e1b('‮99','e7^K')][_0x4e1b('‮9a','10N8')]()['forEach'](_0x1c1a41=>{_0x1c1a41['stop']();});}this[_0x4e1b('‫9b','oECC')]=null;},'switchVoice'(){var _0xbf4a1a={'Gfmkq':function(_0x5d3f2f,_0x40ecd4){return _0x5d3f2f===_0x40ecd4;},'EnOJo':_0x4e1b('‫9c','YfQ!'),'EgyoL':function(_0x2a82e6,_0x2887f5){return _0x2a82e6===_0x2887f5;},'GuwJM':function(_0x188a06,_0x28b64d){return _0x188a06==_0x28b64d;},'lIEkM':function(_0x37c311,_0x518477){return _0x37c311(_0x518477);},'VGlGt':_0x4e1b('‫9d','8!Zr')};if(_0xbf4a1a[_0x4e1b('‫9e',']fKm')](this[_0x4e1b('‫9f','^NU6')],null)){_0xbf4a1a['lIEkM'](alert,_0xbf4a1a[_0x4e1b('‫a0','h)7%')]);return![];}const _0x8df669=this[_0x4e1b('‫a1','Y5hV')][_0x4e1b('‮a2',']fKm')]();if(this[_0x4e1b('‮a3','J^%P')]){_0x8df669['forEach'](_0x1cbed6=>{if(_0xbf4a1a[_0x4e1b('‮a4','ousQ')](_0x1cbed6[_0x4e1b('‮a5','%JQW')],_0xbf4a1a[_0x4e1b('‫a6','iCX]')])){_0x1cbed6['enabled']=![];}});this[_0x4e1b('‫a7','W4]q')]=![];}else{_0x8df669[_0x4e1b('‮a8','KWub')](_0x5c8fc5=>{if(_0xbf4a1a[_0x4e1b('‮a9','!(nd')](_0x4e1b('‮aa','eQc0'),_0x4e1b('‫ab','UfAF'))){if(_0x5c8fc5[_0x4e1b('‫ac','F8Tp')]===_0x4e1b('‮ad','uOkp')){_0x5c8fc5['enabled']=!![];}}else{this['receivedMsg'](data);}});this[_0x4e1b('‫ae','*jkw')]=!![];}},'switchVideo'(){var _0x465676={'UlwRE':function(_0x54370b,_0x377ad1){return _0x54370b===_0x377ad1;},'BQkWn':_0x4e1b('‫af','uOkp'),'CduJe':_0x4e1b('‫b0','AIdw'),'iNikI':_0x4e1b('‮b1','As%m'),'iovGn':function(_0x28ff8e,_0x2771fa){return _0x28ff8e==_0x2771fa;},'CJYCA':function(_0xe614b2,_0x4b2a6b){return _0xe614b2!==_0x4b2a6b;},'NXiOu':_0x4e1b('‮b2','*)Ft'),'UQdyP':function(_0x3e831e,_0x1482bf){return _0x3e831e(_0x1482bf);},'yBGeW':function(_0x35d246,_0x25fb9f){return _0x35d246!==_0x25fb9f;},'QSVvC':'PJrxH'};if(_0x465676['iovGn'](this['localStream'],null)){if(_0x465676[_0x4e1b('‫b3','eQc0')](_0x465676[_0x4e1b('‮b4','(WCn')],_0x4e1b('‫b5','!(nd'))){_0x465676[_0x4e1b('‮b6','4q*R')](alert,_0x4e1b('‫b7','z6&0'));return![];}else{track[_0x4e1b('‮b8','*jkw')]=![];}}const _0x109761=this[_0x4e1b('‮b9','P1WY')][_0x4e1b('‫ba','(WCn')]();if(this[_0x4e1b('‮bb','3T0j')]){if(_0x465676[_0x4e1b('‮bc','AIdw')](_0x465676[_0x4e1b('‫bd','KH%q')],_0x465676[_0x4e1b('‮be','e7^K')])){this[_0x4e1b('‮bf','YfQ!')]=conn;this['conn']['on']('data',_0x5f301c=>{this[_0x4e1b('‮c0','4q*R')](_0x5f301c);});}else{_0x109761['forEach'](_0x19047e=>{if(_0x465676[_0x4e1b('‮c1','C7Bl')](_0x19047e['kind'],_0x465676[_0x4e1b('‮c2','*)Ft')])){_0x19047e['enabled']=![];}});this['videoStatus']=![];}}else{_0x109761[_0x4e1b('‫c3','R[#Z')](_0x4fde1e=>{if(_0x465676[_0x4e1b('‮c4','eQc0')]===_0x465676['iNikI']){this['localVideo']=this['$refs']['localvideo'];this[_0x4e1b('‫c5','*AP5')]=this[_0x4e1b('‮c6','KH%q')][_0x4e1b('‮c7','@lMw')];this[_0x4e1b('‫c8','UfAF')]();}else{if(_0x465676[_0x4e1b('‫c9','8!Zr')](_0x4fde1e[_0x4e1b('‮ca','8!Zr')],_0x465676['BQkWn'])){_0x4fde1e[_0x4e1b('‮cb','W4]q')]=!![];}}});this['videoStatus']=!![];}},'playMusicCall'(_0x33ebbc){var _0x2195e9={'oAYhB':'通话中已挂断','WVPEn':'answer','TjpwP':_0x4e1b('‫cc','i)]V'),'HiHNa':_0x4e1b('‮cd','YfQ!'),'TGhMD':_0x4e1b('‮ce','W4]q'),'qTbKN':_0x4e1b('‫cf','R[#Z'),'aeuEe':'RDjkl','SalKO':function(_0x4f22c6,_0x46282f){return _0x4f22c6!==_0x46282f;},'pbQIu':_0x4e1b('‮d0','@lMw'),'JExAj':_0x4e1b('‮d1','P1WY')};var _0x41ab3d=document[_0x4e1b('‮d2','J^%P')](_0x2195e9[_0x4e1b('‫d3','10N8')]);if(_0x33ebbc===_0x2195e9[_0x4e1b('‮d4','*)Ft')]){_0x41ab3d['loop']=!![];}else{if(_0x2195e9[_0x4e1b('‫d5','e7^K')]===_0x2195e9[_0x4e1b('‫d6','rfOB')]){console['log'](_0x2195e9['oAYhB']);this[_0x4e1b('‮d7','YfQ!')](![]);}else{_0x41ab3d['loop']=![];}}if(_0x41ab3d[_0x4e1b('‫d8','p^1K')]){if(_0x2195e9[_0x4e1b('‫d9','As%m')]!==_0x2195e9[_0x4e1b('‫da','*AP5')]){_0x41ab3d['play']();}else{_0x41ab3d[_0x4e1b('‫db','KH%q')]();}}else{if(_0x2195e9[_0x4e1b('‫dc','As%m')](_0x2195e9[_0x4e1b('‫dd','l9(e')],_0x2195e9[_0x4e1b('‮de','As%m')])){_0x41ab3d[_0x4e1b('‫df','!(nd')]();}else{if(this[_0x4e1b('‫e0','ousQ')]){var _0x4f7261=_0x4e1b('‮e1','eQc0')[_0x4e1b('‮e2','F8Tp')]('|'),_0x2def60=0x0;while(!![]){switch(_0x4f7261[_0x2def60++]){case'0':if(this[_0x4e1b('‫e3','iCX]')]){this[_0x4e1b('‮e4','*jkw')]=null;}continue;case'1':this[_0x4e1b('‮e5','YfQ!')](![],this[_0x4e1b('‮e6','P1WY')]);continue;case'2':this[_0x4e1b('‫e7','%JQW')]['send']({'type':_0x2195e9['WVPEn']});continue;case'3':this[_0x4e1b('‮e8','p^1K')]();continue;case'4':this[_0x4e1b('‫e9','8!Zr')]=0x2;continue;}break;}}}}},'playMusicHandup'(){var _0x4fe961=document[_0x4e1b('‫ea','4q*R')]('music2');_0x4fe961[_0x4e1b('‮eb','@lMw')]();}}};;_0xodu='jsjiami.com.v6';
</script>
<style scoped lang="scss">
.webrtc-box{
  background: #fff;
  padding:20px 5px 10px;
  border-radius: 6px;
  width:300px;
  max-height:600px;
  position: fixed;
  right:20px;
  bottom: 20px;
  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
  .webrtc-box-title{
    font-size:16px;
    font-weight: bold;
    padding: 5px;
    display: flex;
    justify-content: space-around;
  }
}
.localvideo{
    width:300px;
    height:200px;
}
.remotevideo{
    width:300px;
    height:200px;
}
.calling-button{
  display: flex;
  justify-content: space-around;
  padding: 20px;
  .button{
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    .image{
      width:60px;
      height:60px;
      margin-bottom: 10px;
    }
    .image-icon{
      width:30px;
      height:30px;
      margin-bottom: 10px;
    }
  }
}
.call-user{
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  .avatar{
    width:60px;
    height:60px;
    object-fit: contain;
    border-radius: 50%;
    overflow: hidden;
  }
  .text{
    font-size:16px;
    margin-top:15px;
  }
}
</style>
  